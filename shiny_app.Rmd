---
title: "R Shiny App"
author: "Wu Gong"
date: "`r Sys.Date()`"
output:
  rmdformats::readthedown:
    self_contained: true
    thumbnails: false
    code_folding: hide
    toc_depth: 6
    lightbox: true
    gallery: false
    highlight: monochrome
    css: Wu.css
---


	
```{r setup, echo=FALSE, cache=FALSE,warning=FALSE,message=FALSE}
library(knitr)
library(rmdformats)
library(Wu)
opts_chunk$set(echo=TRUE
             , cache=FALSE
             , eval=TRUE
             , prompt=FALSE
             , results="asis"
             , tidy=FALSE
             , comment=NA
             , message=FALSE
             , warning=FALSE
             , out.width = '80%'
             , class.source='klippy'
               )
eval_fast <- TRUE
eval_slow <- FALSE
klippy::klippy(position = c('top', 'left')
             , tooltip_message = 'Click to copy'
             , tooltip_success = 'Done')
```




# [Back to Index](index.html)






 * R examples here are generated by gpt-4.


# Sum of two numbers

```{r, eval = FALSE}

library(shiny)

# Define the user interface
ui <- fluidPage(
  titlePanel("Reactive Example"),
  
  sidebarLayout(
    sidebarPanel(
      numericInput("num1", "First number:", value = 0),
      numericInput("num2", "Second number:", value = 0)
    ),
    
    mainPanel(
      textOutput("sum")
    )
  )
)

# Define the server logic
server <- function(input, output) {
  
  # Create a reactive expression for the sum
  sum_reactive <- reactive({
    input$num1 + input$num2
  })
  
  # Display the sum
  output$sum <- renderText({
    paste("The sum is:", sum_reactive())
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)


```

# Changing line

```{r, eval = FALSE}
library(shiny)
library(ggplot2)

# Define the user interface
ui <- fluidPage(
  titlePanel("Reactive Scatter Plot Example"),

  sidebarLayout(
    sidebarPanel(
      selectInput("dataset",
                  "Select a dataset:",
                  choices = c("mtcars", "iris")),
      uiOutput("xvar_selector"),
      uiOutput("yvar_selector")
    ),

    mainPanel(
      plotOutput("scatter_plot")
    )
  )
)

# Define the server logic
server <- function(input, output) {
  
  # Load the selected dataset
  dataset_reactive <- reactive({
    switch(input$dataset,
           "mtcars" = mtcars,
           "iris" = iris)
  })

  # Generate variable selectors based on the selected dataset
  output$xvar_selector <- renderUI({
    selectInput("xvar",
                "Select x-axis variable:",
                choices = colnames(dataset_reactive()))
  })

  output$yvar_selector <- renderUI({
    selectInput("yvar",
                "Select y-axis variable:",
                choices = colnames(dataset_reactive()))
  })

  # Create the scatter plot
  output$scatter_plot <- renderPlot({
    # Check if both variables are selected
    if (is.null(input$xvar) || is.null(input$yvar)) {
      return(NULL)
    }

    # Create the plot using ggplot2
    ggplot(dataset_reactive(), aes_string(x = input$xvar, y = input$yvar)) +
      geom_point() +
      labs(x = input$xvar, y = input$yvar)
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)


```


# Text as input

```{r, eval = FALSE}
library(shiny)

# Define the user interface
ui <- fluidPage(
  titlePanel("Word Count Example"),

  sidebarLayout(
    sidebarPanel(
      textAreaInput("user_text", "Enter your text:", rows = 5, width = "100%"),
      actionButton("count_button", "Count words")
    ),

    mainPanel(
      textOutput("word_count")
    )
  )
)

# Define the server logic
server <- function(input, output) {
  
  # Count the number of words in the input text
  count_words <- function(text) {
    if (text == "") {
      return(0)
    } else {
      words <- unlist(strsplit(text, "\\W+"))
      return(length(words))
    }
  }
  
  # Create a reactive value to store the word count
  word_count <- reactiveVal(0)

  # Update the word count when the button is clicked
  observeEvent(input$count_button, {
    word_count(count_words(input$user_text))
  })

  # Display the word count
  output$word_count <- renderText({
    paste("Number of words:", word_count())
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)


```

# Text as input and output text

```{r, eval = FALSE}

library(shiny)

# Define the user interface
ui <- fluidPage(
  titlePanel("Reverse Text Example"),

  sidebarLayout(
    sidebarPanel(
      textInput("user_text", "Enter your text:"),
      actionButton("reverse_button", "Reverse text")
    ),

    mainPanel(
      textOutput("reversed_text")
    )
  )
)

# Define the server logic
server <- function(input, output) {
  
  # Reverse the input text
  reverse_text <- function(text) {
    return(paste(rev(strsplit(text, "")[[1]]), collapse = ""))
  }
  
  # Create a reactive value to store the reversed text
  reversed_text <- reactiveVal("")

  # Update the reversed text when the button is clicked
  observeEvent(input$reverse_button, {
    reversed_text(reverse_text(input$user_text))
  })

  # Display the reversed text
  output$reversed_text <- renderText({
    reversed_text()
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)

```


# Two text outputs

```{r, eval = FALSE}
library(shiny)

# Define the user interface
ui <- fluidPage(
  titlePanel("Text Manipulation Example"),

  sidebarLayout(
    sidebarPanel(
      textInput("user_text", "Enter your text:"),
      actionButton("process_button", "Process text")
    ),

    mainPanel(
      textOutput("reversed_text"),
      textOutput("uppercase_text")
    )
  )
)

# Define the server logic
server <- function(input, output) {
  
  # Reverse the input text
  reverse_text <- function(text) {
    return(paste(rev(strsplit(text, "")[[1]]), collapse = ""))
  }
  
  # Convert the input text to uppercase
  uppercase_text <- function(text) {
    return(toupper(text))
  }

  # Create reactive values to store the reversed and uppercase text
  reversed_text_val <- reactiveVal("")
  uppercase_text_val <- reactiveVal("")

  # Update the reversed and uppercase text when the button is clicked
  observeEvent(input$process_button, {
    reversed_text_val(reverse_text(input$user_text))
    uppercase_text_val(uppercase_text(input$user_text))
  })

  # Display the reversed text
  output$reversed_text <- renderText({
    paste("Reversed text:", reversed_text_val())
  })

  # Display the uppercase text
  output$uppercase_text <- renderText({
    paste("Uppercase text:", uppercase_text_val())
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)


```


# Formating output and no reativeVal




 * border: 2px solid #333; sets a 2-pixel-wide solid border with a color of #333 (dark gray).
 * background-color: #f2f2f2; sets the background color of the container to a light gray.
 * padding: 20px; adds 20 pixels of padding around the text inside the container.
 * border-radius: 5px; adds rounded corners to the container with a 5-pixel radius.

```{r, eval=FALSE}

library(shiny)

# Define the user interface
ui <- fluidPage(
  titlePanel("Reverse Text Example"),

  sidebarLayout(
    sidebarPanel(
      textInput("user_text", "Enter your text:")
    ),

    mainPanel(
        h3("Reversed text:"),
      div(
  id = "output-container",
  textOutput("reversed_text"),
  style = "border: 2px solid #333; background-color: #f2f2f2; padding: 20px; border-radius: 5px;"
)

    )
  )
)

# Define the server logic
server <- function(input, output) {

  # Reverse the input text
  reverse_text <- function(text) {
    return(paste(rev(strsplit(text, "")[[1]]), collapse = ""))
  }

  # Display the reversed text directly from the input
  output$reversed_text <- renderText({
     reverse_text(input$user_text)
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)


```

# Output both text and plot

```{r, eval=FALSE}
library(shiny)
library(ggplot2)

# Define the user interface
ui <- fluidPage(
  titlePanel("Text and Plot Example"),

  sidebarLayout(
    sidebarPanel(
      numericInput("input_value", "Enter a value:", value = 1, min = 1)
    ),

    mainPanel(
      h3("Square of the input value:"),
      textOutput("text_output"),

      h3("Bar plot of the input value:"),
      plotOutput("plot_output")
    )
  )
)

# Define the server logic
server <- function(input, output) {

  # Compute the square of the input value
  square_value <- function(value) {
    return(value^2)
  }

  # Display the square of the input value as text
  output$text_output <- renderText({
    square_value(input$input_value)
  })

  # Display a bar plot of the input value
  output$plot_output <- renderPlot({
    data <- data.frame(value = input$input_value)
    ggplot(data, aes(x = "Value", y = value)) +
      geom_bar(stat = "identity", fill = "steelblue") +
      ylim(0, max(10, input$input_value)) +
      theme_minimal()
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)


```



# Adaptive input and output

```{r, eval = FALSE}
library(shiny)

# Define the user interface
ui <- fluidPage(
  titlePanel("Adaptive Input and Output Example"),

  sidebarLayout(
    sidebarPanel(
      actionButton("add_input", "Add input field")
    ),

    mainPanel(
      div(id = "input_container"),
      div(id = "output_container")
    )
  )
)

# Define the server logic
server <- function(input, output, session) {

  # Counter to track the number of inputs
  input_counter <- reactiveVal(0)

  # Add an input field
  observeEvent(input$add_input, {
    input_counter(input_counter() + 1)
    input_id <- paste0("input_value_", input_counter())
    output_id <- paste0("output_value_", input_counter())

    insertUI(
      selector = "#input_container",
      ui = tags$div(
        id = paste0("div_", input_counter()),
        numericInput(input_id, paste("Value", input_counter(), ":"), value = 1, min = 1)
      )
    )

    insertUI(
      selector = "#output_container",
      ui = tags$div(
        id = paste0("output_div_", input_counter()),
        textOutput(output_id)
      )
    )

    output[[output_id]] <- renderText({
      input_value <- as.numeric(input[[input_id]])
      square_value <- input_value^2
      paste("Square of value", input_counter(), ":", square_value)
    })
  })
}

# Create the Shiny app
shinyApp(ui = ui, server = server)


```

# R sessionInfo

```{r}
sessionInfo()

```
